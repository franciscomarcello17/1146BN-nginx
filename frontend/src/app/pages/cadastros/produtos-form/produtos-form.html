<div class="container">
  <div class="card">
    <h2>{{ editando ? 'Editar Produto' : 'Novo Produto' }}</h2>

    <div *ngIf="carregando && editando" class="loading">
      Carregando produto...
    </div>

    <form *ngIf="!carregando || !editando" (submit)="salvar()" class="form">
      <div class="input-group">
        <label>Nome *</label>
        <input 
          [(ngModel)]="produto.nome" 
          name="nome" 
          type="text" 
          required
          maxlength="100"
          placeholder="Nome do produto">
      </div>

      <div class="input-group">
        <label>Descrição</label>
        <textarea 
          [(ngModel)]="produto.descricao" 
          name="descricao"
          rows="4"
          maxlength="500"
          placeholder="Descrição detalhada do produto"></textarea>
      </div>

      <div class="row">
        <div class="input-group">
          <label>Preço (R$) *</label>
          <input 
            [(ngModel)]="produto.preco" 
            name="preco" 
            type="number" 
            step="0.01"
            min="0"
            required
            placeholder="0,00">
        </div>

        <div class="input-group">
          <label>Estoque *</label>
          <input 
            [(ngModel)]="produto.estoque" 
            name="estoque" 
            type="number" 
            min="0"
            required
            placeholder="0">
        </div>
      </div>

      <div class="button-group">
        <button 
          type="submit" 
          class="btn-primary" 
          [disabled]="carregando">
          {{ carregando ? 'Salvando...' : (editando ? 'Atualizar' : 'Criar') }}
        </button>

        <button 
          type="button" 
          class="btn-secondary" 
          routerLink="/cadastros/produtos"
          [disabled]="carregando">
          Cancelar
        </button>
      </div>
    </form>

    <div *ngIf="mensagem" class="mensagem" [class.error]="mensagem.includes('Erro')">
      {{ mensagem }}
    </div>
  </div>
</div>